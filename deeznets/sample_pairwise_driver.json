{
    "nodes": {
        "conv0": {
            "activation": "relu",
            "border_mode": "valid",
            "downsample_shape": [
                1,
                1
            ],
            "input_shape": [
                1,
                28,
                28
            ],
            "name": "conv0",
            "pool_shape": [
                2,
                2
            ],
            "type": "Conv3D",
            "weight_shape": [
                15,
                1,
                9,
                9
            ]
        },
        "affine0": {
            "type": "Affine",
            "name": "affine0",
            "param_shapes": {
                "bias": [
                    512
                ],
                "weights": [
                    1500,
                    512
                ]
            },
            "output_shapes": {
                "output": [
                    512
                ]
            },
            "activation": "relu",
            "input_shapes": {
                "input": [
                    1500
                ]
            }
        },
        "affine0": {
            "type": "Affine",
            "name": "affine1",
            "param_shapes": {
                "bias": [
                    2
                ],
                "weights": [
                    512,
                    2
                ]
            },
            "output_shapes": {
                "output": [
                    2
                ]
            },
            "activation": "relu",
            "input_shapes": {
                "input": [
                    1500
                ]
            }
        },
        "conv0_A": {
            "type": "Copy",
            "node": "conv0_A"
        },
        "affine0_A": {
            "type": "Copy",
            "node": "affine0"
        },
        "affine1_A": {
            "type": "Copy",
            "node": "affine1"
        }
    },
    "edges": [
        [
            "$:x1",
            "conv0.input"
        ],
        [
            "conv0.output",
            "affine0.input"
        ],
        [
            "affine0.output",
            "affine1.input"
        ],
        [
            "affine1.output",
            "distance.input-A"
        ],
        [
            "affine1.output",
            "=:z1"
        ],
        [
            "$:x2",
            "conv0_A.input"
        ],
        [
            "conv0_A.output",
            "affine0_A.input"
        ],
        [
            "affine0_A.output",
            "affine1_A.input"
        ],
        [
            "affine1_A.output",
            "distance.input-B"
        ],
        [
            "affine1_A.output",
            "=:z2"
        ],
        [
            "distance.output",
            "=:distance"
        ]
    ],
    "losses": [
        {
            "type": "SquareSquareLoss",
            "inputs": {
                "cost": "distance"
            },
            "givens": {
                "target": "similarity"
            }
        }
    ],
    "updates": {
        "type": "SGD",
        "param-postfix": "learning_rate",
    },
    "constraints": [],
    "constants": {
        "conv0.weights-learning_rate": 0.01,
        "conv0.bias-learning_rate": 0.01,
        "affine0.weights-learning_rate": 0.01,
        "affine0.bias-learning_rate": 0.01,
        "affine1.weights-learning_rate": 0.01,
        "affine1.bias-learning_rate": 0.01,
        "conv0.dropout": 0.0,
        "affine0.dropout": 0.0,
        "affine1.dropout": 0.0
    },
    "data": {
        "source": "/Volumes/speedy/mnist.shf",
        "batch_size": 50
    },
    "config": {
        "max_iterations": 10000,
        "print_frequency": 25
    }
}
